
import { LessonStage, LessonQuiz, PracticalTest, LessonStructure } from '@/types/lesson';

// C1 Advanced Level Lesson Stages
const stages: LessonStage[] = [
  {
    id: 'c1-s1',
    title: 'Advanced Business Negotiation',
    description: 'Learn sophisticated negotiation techniques and language for business contexts',
    content: `# Advanced Business Negotiation Techniques

In this advanced lesson, you'll learn sophisticated negotiation strategies and language that can be applied in complex business situations. Effective negotiation requires not only strong language skills but also cultural awareness, strategic thinking, and emotional intelligence.

## Key Negotiation Phases

### 1. Preparation
Before entering any negotiation, thorough preparation is essential:

- Research your counterpart's position, interests, and constraints
- Establish your BATNA (Best Alternative To a Negotiated Agreement)
- Set clear objectives and identify your "walk away" point
- Anticipate potential objections and prepare responses
- Consider cultural factors that might impact negotiation styles

### 2. Opening Stage
How you start a negotiation often establishes the tone for the entire process:

- Begin with appropriate formalities and build rapport
- Clearly articulate your understanding of the situation
- Present an initial position that allows room for movement
- Listen carefully to the other party's opening statements

### 3. Exploration Phase
This is where you gather information about interests and positions:

- Ask open-ended questions to uncover underlying interests
- Use active listening techniques to fully understand concerns
- Clarify ambiguities and misunderstandings
- Identify potential areas for mutual gain

### 4. Bargaining
This is the heart of the negotiation process:

- Present proposals and counterproposals
- Make calculated concessions
- Use conditional language ("If you..., then we...")
- Maintain a problem-solving approach rather than positional bargaining

### 5. Closing and Agreement
The final phase requires careful attention to details:

- Summarize points of agreement and remaining issues
- Document the terms clearly
- Establish implementation procedures and timelines
- End on a positive note that strengthens the relationship

## Advanced Language for Negotiation

### Diplomatic Disagreement
- "I appreciate your position on this matter, however..."
- "While I understand your constraints, we need to consider..."
- "That's an interesting perspective. Have you considered..."
- "I see your point, but I'd like to suggest an alternative approach..."

### Making Proposals
- "What if we were to consider a graduated payment schedule?"
- "One possible solution might be to restructure the agreement as follows..."
- "We could potentially offer X if you could accommodate Y..."
- "I'd like to propose a compromise that addresses both our concerns..."

### Handling Difficult Moments
- "Let's take a step back and focus on our shared objectives..."
- "Perhaps we should revisit this point after we've made progress on other areas..."
- "I sense we're at an impasse on this issue. May I suggest..."
- "Let's consider bringing in a third party to help us resolve this particular aspect..."

### Cultural Considerations
Remember that negotiation styles vary significantly across cultures:

- Some cultures value direct communication, while others prefer indirect approaches
- Time orientation differs (short-term vs. long-term focus)
- Decision-making processes vary (consensus-based vs. hierarchical)
- The importance of relationship-building vs. task completion varies

By recognizing these differences and adapting your approach accordingly, you can navigate complex international negotiations more effectively.`,
    videoId: 'LuCBQyhJcUw',
    examples: [
      {
        english: "I understand your concerns about the timeline, but I'd like to explore options that could help us meet this deadline while ensuring quality.",
        indonesian: "Saya memahami kekhawatiran Anda tentang jadwal, tetapi saya ingin mengeksplorasi opsi yang dapat membantu kita memenuhi tenggat waktu ini sambil memastikan kualitas."
      },
      {
        english: "While your offer is competitive, we would need more favorable payment terms to move forward.",
        indonesian: "Meskipun penawaran Anda kompetitif, kami memerlukan persyaratan pembayaran yang lebih menguntungkan untuk melangkah maju."
      },
      {
        english: "What if we were to extend the contract period by six months in exchange for a 5% reduction in the monthly fee?",
        indonesian: "Bagaimana jika kita memperpanjang masa kontrak selama enam bulan sebagai pertukaran untuk pengurangan 5% pada biaya bulanan?"
      },
      {
        english: "I propose we create a joint working group to address these implementation challenges.",
        indonesian: "Saya mengusulkan kita membentuk kelompok kerja gabungan untuk mengatasi tantangan implementasi ini."
      }
    ]
  },
  {
    id: 'c1-s2',
    title: 'Rhetorical Devices in Professional Communication',
    description: 'Master advanced rhetorical techniques to enhance persuasiveness and impact',
    content: `# Rhetorical Devices in Professional Communication

At an advanced level of English proficiency, understanding and utilizing rhetorical devices can significantly enhance your communication effectiveness, particularly in professional contexts. This lesson explores various rhetorical techniques and their strategic applications.

## What Are Rhetorical Devices?

Rhetorical devices are linguistic tools that speakers and writers use to convey meaning, persuade an audience, or evoke an emotional response. They help structure arguments, emphasize key points, and make communication more engaging and memorable.

## Key Rhetorical Devices for Professional Settings

### Anaphora
Repetition of a word or phrase at the beginning of successive clauses:

**Example:** "We must invest in our future. We must embrace innovation. We must lead rather than follow."

**Usage:** Particularly effective in speeches, presentations, and motivational communications. Creates rhythm and emphasis.

### Antithesis
Juxtaposition of contrasting ideas in balanced phrases:

**Example:** "We must cut costs without compromising quality; respond faster while maintaining thoroughness; think globally while acting locally."

**Usage:** Highlights contrasts and creates memorable phrases that encapsulate complex ideas.

### Hypophora
Raising a question and then immediately answering it:

**Example:** "What does this mean for our quarterly objectives? It means we need to reassess our priorities and reallocate resources accordingly."

**Usage:** Guides the audience's thinking and maintains their engagement. Useful for anticipating questions.

### Tricolon
A series of three parallel elements (words, phrases, or clauses):

**Example:** "Our strategy focuses on innovation, integration, and implementation."

**Usage:** Creates a sense of completeness and is more memorable than lists of two or four items.

### Metaphor and Analogy
Implying comparison between unlike things to clarify complex concepts:

**Example:** "This merger isn't just a marriage of companies; it's the creation of an ecosystem where diverse business models can cross-pollinate and thrive."

**Usage:** Makes abstract concepts more concrete and relatable. Particularly useful when explaining complex ideas.

### Aposiopesis
Breaking off suddenly in speech, leaving thought incomplete:

**Example:** "If we don't address this market shift now... But I'm confident we will rise to the challenge."

**Usage:** Creates dramatic effect and implies consequences without stating them directly. Use sparingly in formal communications.

## Strategic Application in Different Contexts

### Presentations and Speeches
- Begin with a powerful anecdote or striking statistic
- Use rhetorical questions to engage the audience
- Incorporate deliberate pauses after important points
- Employ tricolon for key message points
- Conclude with a call to action that echoes your opening theme

### Written Communications
- Use parallelism in bullet points and lists
- Employ metaphors to clarify complex concepts
- Structure arguments using clear transition phrases
- Consider strategic repetition for emphasis
- Balance emotional and logical appeals appropriately

### Negotiations and Discussions
- Use hypothetical scenarios to explore possibilities
- Employ concession-assertion patterns to acknowledge other viewpoints
- Ask calibrated questions that guide thinking
- Use inclusive language when building consensus
- Apply antithesis to present balanced alternatives

## Cultural Considerations

When using rhetorical devices across cultures:
- Directness vs. indirectness varies significantly
- Humor and irony may not translate well
- Metaphors often have cultural foundations
- Some cultures value understatement over emphasis
- Consider the appropriate level of emotional expression

By mastering these rhetorical devices and applying them judiciously, you can elevate your professional communication from merely functional to genuinely impactful and persuasive.`,
    examples: [
      {
        english: "We face three critical challenges: declining market share, increasing operational costs, and evolving customer expectations.",
        indonesian: "Kita menghadapi tiga tantangan kritis: pangsa pasar yang menurun, biaya operasional yang meningkat, dan ekspektasi pelanggan yang berkembang."
      },
      {
        english: "Are we prepared to make this investment? I believe we are not only prepared but uniquely positioned to leverage this opportunity.",
        indonesian: "Apakah kita siap untuk melakukan investasi ini? Saya yakin kita tidak hanya siap tetapi memiliki posisi unik untuk memanfaatkan peluang ini."
      },
      {
        english: "In the words of management expert Peter Drucker, 'Culture eats strategy for breakfast.' This certainly applies to our current situation.",
        indonesian: "Dalam kata-kata pakar manajemen Peter Drucker, 'Budaya memakan strategi untuk sarapan.' Ini tentu berlaku untuk situasi kita saat ini."
      },
      {
        english: "We need to work smarter, not harder; think long-term, not quarterly; and focus on value creation, not just cost reduction.",
        indonesian: "Kita perlu bekerja lebih cerdas, bukan lebih keras; berpikir jangka panjang, bukan triwulanan; dan fokus pada penciptaan nilai, bukan hanya pengurangan biaya."
      }
    ]
  }
];

// C1 Advanced Level Quizzes
const quizzes: LessonQuiz[] = [
  {
    id: 'c1-s1-quiz',
    title: 'Advanced Business Negotiation Quiz',
    description: 'Test your understanding of advanced negotiation techniques',
    skillType: 'speaking',
    requiredScore: 70,
    questions: [
      {
        id: 'q1-c1s1',
        type: 'multiple-choice',
        question: 'Which of the following statements best represents an effective approach during the exploration phase of a negotiation?',
        options: [
          'Present your minimum acceptable terms immediately to save time',
          'Avoid revealing any information about your priorities',
          'Ask open-ended questions to uncover the other party\'s underlying interests',
          'Make your largest concessions early to build goodwill'
        ],
        correctAnswer: 'Ask open-ended questions to uncover the other party\'s underlying interests',
        explanation: 'The exploration phase is about gathering information. Open-ended questions help you understand the other party\'s true interests and priorities, which creates opportunities for mutually beneficial solutions.',
        difficulty: 'medium',
        points: 2
      },
      {
        id: 'q2-c1s1',
        type: 'matching',
        question: 'Match the negotiation phase with its primary purpose:',
        pairs: [
          {
            left: 'Preparation',
            right: 'Research positions and establish objectives'
          },
          {
            left: 'Opening',
            right: 'Set the tone and present initial positions'
          },
          {
            left: 'Exploration',
            right: 'Gather information about interests'
          },
          {
            left: 'Bargaining',
            right: 'Exchange proposals and make concessions'
          },
          {
            left: 'Closing',
            right: 'Finalize terms and implementation plans'
          }
        ],
        explanation: 'Understanding the purpose of each negotiation phase helps you plan your approach and focus on the appropriate activities at each stage.',
        difficulty: 'easy',
        points: 1
      },
      {
        id: 'q3-c1s1',
        type: 'multiple-choice',
        question: 'What does BATNA stand for in the context of negotiation?',
        options: [
          'Basic Agreement Terms for Negotiation Advancement',
          'Best Approach To Negotiate Agreement',
          'Business Analysis of Terms and Negotiation Assets',
          'Best Alternative To a Negotiated Agreement'
        ],
        correctAnswer: 'Best Alternative To a Negotiated Agreement',
        explanation: 'Your BATNA represents your best course of action if the current negotiation fails. Understanding your BATNA gives you confidence and helps you determine your walk-away point.',
        difficulty: 'easy',
        points: 1
      },
      {
        id: 'q4-c1s1',
        type: 'fill-in-blank',
        question: 'Complete this statement about cultural differences in negotiation:',
        text: "Some cultures value [blank1] communication, while others prefer [blank2] approaches. Decision-making processes can vary between [blank3]-based and [blank4] methods.",
        answers: {
          'blank1': 'direct',
          'blank2': 'indirect',
          'blank3': 'consensus',
          'blank4': 'hierarchical'
        },
        explanation: 'Cultural awareness is crucial in international negotiations. Understanding these differences helps you adapt your approach appropriately.',
        difficulty: 'medium',
        points: 2
      },
      {
        id: 'q5-c1s1',
        type: 'ordering',
        question: 'Put the following negotiation phases in their typical sequential order:',
        items: [
          'Bargaining and exchange of proposals',
          'Opening statements and initial positions',
          'Preparation and research',
          'Exploration and information gathering',
          'Closing and finalizing agreement'
        ],
        correctOrder: [2, 1, 3, 0, 4],
        context: 'Understanding the logical flow of negotiation helps you navigate the process effectively.',
        difficulty: 'medium',
        points: 3
      },
      {
        id: 'q6-c1s1',
        type: 'speaking',
        question: 'Practice responding to a difficult negotiation situation:',
        prompt: 'The other party has just said: "Your price is significantly higher than your competitors, and we see no justification for this difference. Either match their price, or we'll have to go with them." How would you respond?',
        expectedPhrases: [
          'understand your concern',
          'value proposition',
          'differentiating factors',
          'quality',
          'long-term relationship'
        ],
        sampleAnswer: "I understand your concern about the price difference. However, I'd like to discuss our unique value proposition that justifies this investment. Our solution includes several differentiating factors such as superior quality, comprehensive support, and proven reliability that result in lower total cost of ownership over time. We're committed to a long-term relationship that delivers exceptional value beyond the initial price point. Perhaps we could explore specific aspects that are most important to you?",
        difficulty: 'hard',
        points: 4
      }
    ]
  },
  {
    id: 'c1-s2-quiz',
    title: 'Rhetorical Devices Quiz',
    description: 'Test your understanding of advanced rhetorical techniques',
    skillType: 'speaking',
    requiredScore: 70,
    questions: [
      {
        id: 'q1-c1s2',
        type: 'multiple-choice',
        question: 'Which rhetorical device involves repetition of a word or phrase at the beginning of successive clauses?',
        options: [
          'Anaphora',
          'Antithesis',
          'Hypophora',
          'Tricolon'
        ],
        correctAnswer: 'Anaphora',
        explanation: 'Anaphora is the repetition of a word or phrase at the beginning of successive clauses, such as "We must invest in our future. We must embrace innovation. We must lead rather than follow."',
        difficulty: 'medium',
        points: 1
      },
      {
        id: 'q2-c1s2',
        type: 'matching',
        question: 'Match these rhetorical devices with their examples:',
        pairs: [
          {
            left: 'Antithesis',
            right: 'Think globally, act locally.'
          },
          {
            left: 'Tricolon',
            right: 'Education, innovation, collaboration.'
          },
          {
            left: 'Metaphor',
            right: 'This merger is a bridge to new opportunities.'
          },
          {
            left: 'Hypophora',
            right: 'What does this mean for us? It means we must adapt.'
          }
        ],
        explanation: 'Recognizing rhetorical devices in use helps you appreciate their effect and learn to apply them in your own communication.',
        difficulty: 'medium',
        points: 2
      },
      {
        id: 'q3-c1s2',
        type: 'drag-drop',
        question: 'Drag each communication context to the rhetorical approach that would be most appropriate for it:',
        items: [
          'Annual shareholder meeting',
          'Technical documentation',
          'Sales negotiation',
          'Team motivation session'
        ],
        targets: [
          'Metaphors and vivid imagery',
          'Precise language and logical structure',
          'Hypothetical scenarios and questions',
          'Inspirational anaphora and tricolon'
        ],
        correctPairings: {
          'Annual shareholder meeting': 'Metaphors and vivid imagery',
          'Technical documentation': 'Precise language and logical structure',
          'Sales negotiation': 'Hypothetical scenarios and questions',
          'Team motivation session': 'Inspirational anaphora and tricolon'
        },
        explanation: 'Different contexts call for different rhetorical approaches. Matching the appropriate techniques to the situation enhances communication effectiveness.',
        difficulty: 'hard',
        points: 3
      },
      {
        id: 'q4-c1s2',
        type: 'image-selection',
        question: 'Which image best represents the rhetorical device being used in this statement: "Our company isn\'t just a business; it\'s an ecosystem where ideas flourish and innovation thrives."',
        imageUrl: 'https://images.unsplash.com/photo-1533750516297-a22db2df61e6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2574&q=80',
        options: [
          'Antithesis',
          'Metaphor',
          'Hyperbole',
          'Anaphora'
        ],
        correctAnswer: 'Metaphor',
        description: 'The image shows a thriving ecosystem, which relates to the metaphorical comparison in the statement.',
        difficulty: 'easy',
        points: 1
      },
      {
        id: 'q5-c1s2',
        type: 'listening',
        question: 'Listen to this short speech excerpt and identify which rhetorical device is primarily being used:',
        audioUrl: '/audio/rhetorical-devices-example.mp3',
        options: [
          'Tricolon',
          'Hypophora',
          'Anaphora',
          'Aposiopesis'
        ],
        correctAnswer: 'Anaphora',
        explanation: 'The speaker repeatedly uses "We will" at the beginning of successive sentences, which is an example of anaphora.',
        transcription: "We will meet our targets. We will exceed customer expectations. We will transform our industry. We will define the future.",
        difficulty: 'medium',
        points: 2
      },
      {
        id: 'q6-c1s2',
        type: 'speaking',
        question: 'Create a response using appropriate rhetorical devices:',
        prompt: 'You need to address your team about an upcoming organizational change that will be challenging but ultimately beneficial. Craft a brief (30-60 second) message that uses at least two rhetorical devices we\'ve covered.',
        expectedPhrases: [
          'change',
          'opportunity',
          'together',
          'future',
          'challenge'
        ],
        sampleAnswer: "The road ahead may seem uncertain, but our direction is clear. The changes we face aren't obstacles; they're stepping stones to a stronger organization. Together we will adapt, together we will innovate, and together we will emerge more resilient than before. Why do I remain confident despite these challenges? Because I've seen what this team can accomplish when united by a common purpose. The question isn't whether we can succeed—it's how remarkable our success will be.",
        difficulty: 'hard',
        points: 4
      }
    ]
  }
];

// C1 Advanced Level Final Test
const finalTest: PracticalTest = {
  id: 'c1-final',
  title: 'Advanced Business Communication Mastery Test',
  description: 'Demonstrate your mastery of advanced business communication skills through multiple assessment components',
  type: 'writing', // Main type for backward compatibility
  prompt: 'Complete all sections of this comprehensive test to demonstrate your advanced business English skills.',
  criteria: [
    'Appropriate use of advanced vocabulary and expressions',
    'Clear organization and cohesive structure',
    'Effective application of rhetorical devices',
    'Nuanced understanding of business concepts',
    'Adaptability to different communication contexts',
    'Cultural sensitivity in international scenarios'
  ],
  minScore: 75,
  sections: [
    {
      id: 'c1-final-s1',
      title: 'Negotiation Scenario Response',
      type: 'writing',
      description: 'Prepare a written response to a complex negotiation scenario',
      prompt: `You represent a technology company that is negotiating a strategic partnership with a larger corporation. Your smaller firm has developed innovative software that complements the larger company's hardware products. While the partnership could significantly expand your market reach, there are concerns about intellectual property protection and revenue sharing.

The larger company has proposed:
- A 70/30 revenue split in their favor
- Exclusive rights to your current and future technologies
- A 3-year commitment period with renewal at their discretion

Write a diplomatic email to their Chief Strategy Officer addressing their proposal. Your response should:
1. Acknowledge the value of the potential partnership
2. Present a counterproposal that better protects your interests
3. Suggest next steps for the negotiation process`,
      criteria: [
        'Strategic negotiation approach',
        'Diplomatic language maintaining positive relationship',
        'Clear counterproposal with justification',
        'Professional business email format',
        'Appropriate level of assertiveness'
      ],
      weight: 30
    },
    {
      id: 'c1-final-s2',
      title: 'Rhetorical Analysis',
      type: 'reading',
      description: 'Analyze the rhetorical devices and persuasive techniques in a business speech',
      prompt: 'Read the following excerpt from a CEO\'s speech and analyze the rhetorical devices and persuasive techniques used:',
      text: `"Today, we stand at a crossroads. Behind us lies a proud history of innovation and growth. Before us stretches a future filled with both unprecedented challenges and extraordinary opportunities.

What defines a truly great company? Not quarterly results, though they matter. Not market share alone, though we pursue it vigorously. Not even customer satisfaction, essential as it is.

No—what defines us is our ability to reimagine what's possible. To see not just what is, but what could be. Our competitors can copy our products, but they cannot copy our vision. They can replicate our processes, but they cannot reproduce our passion.

We must innovate relentlessly, execute flawlessly, and collaborate seamlessly. These three imperatives will guide us through the market turbulence ahead.

Will this journey be easy? Certainly not. Will we face setbacks? Undoubtedly. Will we ultimately succeed? Of that, I have no doubt whatsoever.

The market isn't waiting. Our customers aren't waiting. And neither should we."`,
      criteria: [
        'Accurate identification of multiple rhetorical devices',
        'Insightful analysis of persuasive intent',
        'Understanding of emotional and logical appeals',
        'Recognition of target audience considerations',
        'Coherent analytical structure'
      ],
      weight: 25
    },
    {
      id: 'c1-final-s3',
      title: 'Cross-Cultural Communication',
      type: 'listening',
      description: 'Analyze a cross-cultural business interaction and identify communication issues',
      prompt: 'Listen to this recording of a business meeting between executives from different cultural backgrounds. Identify communication challenges and suggest strategies to improve the interaction.',
      audioUrl: '/audio/c1-cross-cultural-meeting.mp3',
      hiddenText: `[American Executive]: Let's get straight to the point. We need to decide on this today.
      
[Japanese Executive]: We appreciate your timeline. Our team has some concerns about moving so quickly on such an important matter.

[American Executive]: What specific concerns? We've provided all the data you requested.

[Japanese Executive]: Yes, the information is very helpful. We were hoping to have more time for internal consultations.

[American Executive]: Look, we've been discussing this for weeks. I need a yes or no decision today, or we'll have to consider other partners.

[German Executive]: If I may interject, perhaps we could establish some specific parameters for a conditional agreement?

[American Executive]: That's just delaying the inevitable decision. Either we have a deal or we don't.

[Japanese Executive]: We value this potential partnership greatly. We simply wish to ensure proper consensus within our organization.

[German Executive]: Perhaps we could agree on the framework today, with details to be finalized next week?

[American Executive]: *sighs* Fine, but we need firm commitments on the core terms today.

[Japanese Executive]: We would be more comfortable with a memorandum of understanding first, followed by a binding agreement after our consultations.

[American Executive]: That's not going to work for our timeline.`,
      criteria: [
        'Identification of cultural differences in communication styles',
        'Recognition of sources of misunderstanding',
        'Practical suggestions for improved communication',
        'Understanding of cultural dimensions (directness, time orientation, etc.)',
        'Balanced perspective considering all parties' viewpoints'
      ],
      weight: 25
    },
    {
      id: 'c1-final-s4',
      title: 'Strategic Presentation',
      type: 'speaking',
      description: 'Deliver a persuasive business presentation using appropriate rhetorical techniques',
      prompt: `Prepare and deliver a 2-3 minute presentation to potential investors about a fictional company in a sector of your choice. Your presentation should:

1. Introduce the company and its unique value proposition
2. Explain the market opportunity and competitive advantage
3. Present your growth strategy
4. Address potential concerns and risks
5. End with a compelling call to action

Use at least three different rhetorical devices we've covered in the lesson to enhance your persuasiveness.`,
      criteria: [
        'Clear organization with logical flow',
        'Effective use of rhetorical devices',
        'Persuasive argumentation and evidence',
        'Professional delivery and confidence',
        'Appropriate business vocabulary and expressions',
        'Compelling call to action'
      ],
      weight: 20
    }
  ]
};

// Export the complete lesson structure
export const c1Lesson: LessonStructure = {
  stages,
  quizzes,
  finalTest
};
